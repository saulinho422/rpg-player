<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escolha o MÃ©todo de Atributos - RPG Player</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Cinzel+Decorative:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/attribute-method.css">
</head>
<body>
    <div class="method-container">
        <button id="backBtn" class="back-btn">â† Voltar</button>
        
        <div class="method-header">
            <h1>ğŸ² Escolha o MÃ©todo de Atributos</h1>
            <p>Como vocÃª deseja determinar os valores dos seus atributos?</p>
        </div>

        <div class="methods-grid">
            <!-- MÃ©todo 4d6 -->
            <div class="method-card" data-method="4d6">
                <div class="method-icon">ğŸ²</div>
                <h2>4d6 - Role os Dados</h2>
                <p class="method-description">
                    Role 4 dados de 6 lados, descarte o menor valor e some os 3 restantes. 
                    FaÃ§a isso 6 vezes para gerar seus atributos.
                </p>
                <div class="method-features">
                    <div class="feature">âœ¨ Mais emocionante</div>
                    <div class="feature">ğŸ° Resultados variados</div>
                    <div class="feature">ğŸ¬ AnimaÃ§Ãµes incrÃ­veis</div>
                </div>
                <button class="select-method-btn" data-method="4d6">
                    Escolher 4d6
                </button>
            </div>

            <!-- MÃ©todo Valores PadrÃµes -->
            <div class="method-card" data-method="standard">
                <div class="method-icon">ğŸ“Š</div>
                <h2>Valores PadrÃµes</h2>
                <p class="method-description">
                    Use os valores padrÃµes balanceados: 15, 14, 13, 12, 10, 8. 
                    Distribua-os entre os atributos como preferir.
                </p>
                <div class="method-features">
                    <div class="feature">âš–ï¸ Balanceado</div>
                    <div class="feature">âš¡ RÃ¡pido</div>
                    <div class="feature">ğŸ¯ PrevisÃ­vel</div>
                </div>
                <button class="select-method-btn" data-method="standard">
                    Escolher Valores PadrÃµes
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });

        // FunÃ§Ã£o para redirecionar baseado no mÃ©todo
        function selectMethod(method) {
            // Pega parÃ¢metros da URL atual
            const params = new URLSearchParams(window.location.search);
            const characterId = params.get('id');
            const returnTo = params.get('return_to');
            
            if (method === '4d6') {
                let targetUrl = 'roll-4d6.html';
                if (characterId) targetUrl += `?id=${characterId}`;
                if (returnTo) targetUrl += `${characterId ? '&' : '?'}return_to=${returnTo}`;
                
                window.location.href = targetUrl;
            } else if (method === 'standard') {
                // Passa valores padrÃµes via URL (sem localStorage)
                const standardValues = [15, 14, 13, 12, 10, 8];
                const valuesParam = encodeURIComponent(JSON.stringify(standardValues));
                let targetUrl = `distribute-attributes.html?values=${valuesParam}&method=standard`;
                
                if (characterId) targetUrl += `&id=${characterId}`;
                if (returnTo) targetUrl += `&return_to=${returnTo}`;
                
                window.location.href = targetUrl;
            }
        }

        // Adicionar evento nos botÃµes
        document.querySelectorAll('.select-method-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const method = btn.dataset.method;
                selectMethod(method);
            });
        });

        // Adicionar evento nos cards
        document.querySelectorAll('.method-card').forEach(card => {
            card.addEventListener('click', () => {
                const method = card.dataset.method;
                selectMethod(method);
            });
        });
    </script>
</body>
</html>
