<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cria√ß√£o de Personagem - RPG Player</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="img/site.webmanifest">
    <link rel="shortcut icon" href="img/favicon.ico">
    
    <link rel="stylesheet" href="styles/character-creation.css">
</head>
<body>
    <div class="creation-container">
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Ra√ßa & Classe</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Tend√™ncia</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Detalhes</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Atributos</div>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Per√≠cias</div>
            </div>
            <div class="progress-step" data-step="6">
                <div class="step-number">6</div>
                <div class="step-label">Pontos de Vida</div>
            </div>
            <div class="progress-step" data-step="7">
                <div class="step-number">7</div>
                <div class="step-label">Idiomas</div>
            </div>
            <div class="progress-step" data-step="8">
                <div class="step-number">8</div>
                <div class="step-label">Personalidade</div>
            </div>
        </div>

        <!-- Form Steps -->
        <form id="characterForm" class="character-form">
            
            <!-- Step 1: Ra√ßa, Classe, Subclasse, N√≠vel -->
            <div class="form-step active" data-step="1">
                <h2 class="step-title">‚öîÔ∏è Escolha sua Ra√ßa & Classe</h2>
                <p class="step-description">Defina a ess√™ncia do seu her√≥i</p>
                
                <div class="form-group">
                    <label>üè∞ Ra√ßa</label>
                    <button type="button" class="selection-btn" id="selectRaceBtn">
                        <span class="selection-label" id="selectedRaceLabel">Selecione uma ra√ßa...</span>
                        <span class="selection-icon">‚ñº</span>
                    </button>
                    <input type="hidden" id="race" name="race" required>
                </div>

                <div class="form-group">
                    <label>‚öîÔ∏è Classe</label>
                    <button type="button" class="selection-btn" id="selectClassBtn">
                        <span class="selection-label" id="selectedClassLabel">Selecione uma classe...</span>
                        <span class="selection-icon">‚ñº</span>
                    </button>
                    <input type="hidden" id="class" name="class" required>
                </div>

                <div class="form-group" id="subclassGroup" style="display: none;">
                    <label>‚ú® Subclasse</label>
                    <button type="button" class="selection-btn" id="selectSubclassBtn">
                        <span class="selection-label" id="selectedSubclassLabel">Selecione uma subclasse...</span>
                        <span class="selection-icon">‚ñº</span>
                    </button>
                    <input type="hidden" id="subclass" name="subclass">
                </div>

                <div class="form-group">
                    <label for="level">üìä N√≠vel</label>
                    <select id="level" name="level" required>
                        <option value="">Selecione o n√≠vel...</option>
                    </select>
                </div>
            </div>

            <!-- Step 2: Tend√™ncia e Antecedente -->
            <div class="form-step" data-step="2">
                <h2 class="step-title">‚öñÔ∏è Tend√™ncia & Antecedente</h2>
                <p class="step-description">Defina sua moralidade e passado</p>
                
                <div class="form-group">
                    <label for="alignment">‚öñÔ∏è Tend√™ncia</label>
                    <select id="alignment" name="alignment" required>
                        <option value="">Selecione uma tend√™ncia...</option>
                        <option value="leal-bom">Leal e Bom</option>
                        <option value="neutro-bom">Neutro e Bom</option>
                        <option value="caotico-bom">Ca√≥tico e Bom</option>
                        <option value="leal-neutro">Leal e Neutro</option>
                        <option value="neutro">Neutro</option>
                        <option value="caotico-neutro">Ca√≥tico e Neutro</option>
                        <option value="leal-mau">Leal e Mau</option>
                        <option value="neutro-mau">Neutro e Mau</option>
                        <option value="caotico-mau">Ca√≥tico e Mau</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>üìú Antecedente</label>
                    <button type="button" class="selection-btn" id="selectBackgroundBtn">
                        <span class="selection-label" id="selectedBackgroundLabel">Selecione um antecedente...</span>
                        <span class="selection-icon">‚ñº</span>
                    </button>
                    <input type="hidden" id="background" name="background" required>
                </div>
            </div>

            <!-- Step 3: Detalhes do Personagem -->
            <div class="form-step" data-step="3">
                <h2 class="step-title">üé≠ Detalhes do Personagem</h2>
                <p class="step-description">D√™ vida √† apar√™ncia do seu her√≥i</p>
                
                <div class="form-group">
                    <label for="characterName">Nome do Personagem</label>
                    <input type="text" id="characterName" name="characterName" required>
                </div>

                <div class="form-group">
                    <label for="characterImage">Imagem do Personagem</label>
                    <input type="file" id="characterImage" name="characterImage" accept="image/*">
                    <div id="imagePreview" class="image-preview"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eyes">Olhos</label>
                        <input type="text" id="eyes" name="eyes">
                    </div>
                    <div class="form-group">
                        <label for="skin">Pele</label>
                        <input type="text" id="skin" name="skin">
                    </div>
                    <div class="form-group">
                        <label for="hair">Cabelo</label>
                        <input type="text" id="hair" name="hair">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="weight">Peso</label>
                        <input type="text" id="weight" name="weight" placeholder="ex: 70 kg">
                    </div>
                    <div class="form-group">
                        <label for="height">Altura</label>
                        <input type="text" id="height" name="height" placeholder="ex: 1,75 m">
                    </div>
                    <div class="form-group">
                        <label for="age">Idade</label>
                        <input type="number" id="age" name="age" min="1">
                    </div>
                </div>
            </div>

            <!-- Step 4: Atributos -->
            <div class="form-step" data-step="4">
                <h2 class="step-title">üí™ Atributos</h2>
                <p class="step-description">Determine as capacidades fundamentais do seu her√≥i</p>
                
                <div class="method-selection">
                    <h3 class="subsection-title">Escolha o m√©todo de gera√ß√£o:</h3>
                    <div class="method-buttons">
                        <button type="button" class="method-btn" data-method="4d6">
                            <strong>4d6</strong>
                            <span>Role 4 dados e descarte o menor</span>
                        </button>
                        <button type="button" class="method-btn" data-method="standard">
                            <strong>Valores Padr√£o</strong>
                            <span>Use: 15, 14, 13, 12, 10, 8</span>
                        </button>
                    </div>
                </div>

                <div id="diceRolling" class="dice-rolling hidden">
                    <div class="rolls-remaining">
                        Rolagens restantes: <span id="rollsLeft">6</span>
                    </div>
                    
                    <div class="dice-container">
                        <div class="die" id="die1">?</div>
                        <div class="die" id="die2">?</div>
                        <div class="die" id="die3">?</div>
                        <div class="die" id="die4">?</div>
                    </div>
                    
                    <button type="button" id="rollDiceBtn" class="roll-btn">Rolar Dados</button>
                    
                    <div class="rolled-values">
                        <h4>Valores Rolados:</h4>
                        <div id="rolledValuesList"></div>
                    </div>
                </div>

                <div id="attributeAssignment" class="attribute-assignment hidden">
                    <h3>Distribua os valores nos atributos:</h3>
                    <div class="attributes-grid">
                        <div class="attribute-item">
                            <label>For√ßa</label>
                            <select name="str" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>Destreza</label>
                            <select name="dex" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>Constitui√ß√£o</label>
                            <select name="con" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>Intelig√™ncia</label>
                            <select name="int" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>Sabedoria</label>
                            <select name="wis" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>Carisma</label>
                            <select name="cha" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Per√≠cias -->
            <div class="form-step" data-step="5">
                <h2 class="step-title">üéØ Per√≠cias</h2>
                <p class="step-description">Escolha as especialidades do seu personagem</p>
                
                <div class="skills-info">
                    <p>Escolha <strong><span id="skillsToChoose">2</span></strong> per√≠cia(s)</p>
                    <div class="legend">
                        <span class="legend-item"><span class="box checked"></span> Do antecedente</span>
                        <span class="legend-item"><span class="box available"></span> Dispon√≠vel</span>
                        <span class="legend-item"><span class="box disabled"></span> N√£o dispon√≠vel</span>
                    </div>
                </div>

                <div class="skills-grid" id="skillsGrid">
                    <!-- Skills will be populated by JavaScript -->
                </div>
            </div>

            <!-- Step 6: Pontos de Vida -->
            <div class="form-step" data-step="6">
                <h2 class="step-title">‚ù§Ô∏è Pontos de Vida</h2>
                <p class="step-description">Determine a resist√™ncia vital do seu her√≥i</p>
                
                <div class="hp-method-selection">
                    <h3 class="subsection-title">Como deseja calcular seus pontos de vida?</h3>
                    <div class="method-buttons">
                        <button type="button" class="method-btn" data-hp-method="average">
                            <strong>M√©dia</strong>
                            <span>Valor fixo por n√≠vel</span>
                        </button>
                        <button type="button" class="method-btn" data-hp-method="roll">
                            <strong>Rolagem</strong>
                            <span>Role o dado de vida</span>
                        </button>
                    </div>
                </div>

                <div id="hpCalculation" class="hp-calculation hidden">
                    <div class="hp-summary">
                        <h3>Seus Pontos de Vida:</h3>
                        <div class="hp-display">
                            <div class="hp-value">
                                <span id="totalHP">0</span>
                                <label>Total</label>
                            </div>
                        </div>
                        <div class="hp-breakdown" id="hpBreakdown"></div>
                    </div>
                </div>
            </div>

            <!-- Step 7: Idiomas e Profici√™ncias -->
            <div class="form-step" data-step="7">
                <h2 class="step-title">üó£Ô∏è Idiomas e Profici√™ncias</h2>
                <p class="step-description">Amplie as capacidades do seu personagem</p>
                
                <div id="extraChoices" class="extra-choices">
                    <div class="extra-section" id="languageSection">
                        <h3>Idiomas Adicionais</h3>
                        <p>Escolha <strong><span id="languagesToChoose">0</span></strong> idioma(s)</p>
                        <div class="choices-grid" id="languagesGrid"></div>
                    </div>

                    <div class="extra-section" id="proficiencySection">
                        <h3>Profici√™ncias Adicionais</h3>
                        <p>Escolha <strong><span id="proficienciesToChoose">0</span></strong> profici√™ncia(s)</p>
                        <div class="choices-grid" id="proficienciesGrid"></div>
                    </div>
                </div>
            </div>

            <!-- Step 8: Tra√ßos de Personalidade -->
            <div class="form-step" data-step="8">
                <h2 class="step-title">üé≠ Personalidade</h2>
                <p class="step-description">Defina a ess√™ncia emocional e moral do seu her√≥i</p>
                
                <div class="personality-section">
                    <div class="personality-category">
                        <h3>Tra√ßos de Personalidade</h3>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="traits">üé≤ Sortear</button>
                            <button type="button" class="choose-btn" data-category="traits">üìã Escolher</button>
                        </div>
                        <textarea id="traits" name="traits" rows="3" placeholder="Digite ou sorteie um tra√ßo..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>Ideais</h3>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="ideals">üé≤ Sortear</button>
                            <button type="button" class="choose-btn" data-category="ideals">üìã Escolher</button>
                        </div>
                        <textarea id="ideals" name="ideals" rows="3" placeholder="Digite ou sorteie um ideal..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>V√≠nculos</h3>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="bonds">üé≤ Sortear</button>
                            <button type="button" class="choose-btn" data-category="bonds">üìã Escolher</button>
                        </div>
                        <textarea id="bonds" name="bonds" rows="3" placeholder="Digite ou sorteie um v√≠nculo..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>Defeitos</h3>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="flaws">üé≤ Sortear</button>
                            <button type="button" class="choose-btn" data-category="flaws">üìã Escolher</button>
                        </div>
                        <textarea id="flaws" name="flaws" rows="3" placeholder="Digite ou sorteie um defeito..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="form-navigation">
                <button type="button" id="prevBtn" class="nav-btn prev-btn" disabled>‚Üê Anterior</button>
                <button type="button" id="nextBtn" class="nav-btn next-btn">Pr√≥ximo ‚Üí</button>
                <button type="submit" id="submitBtn" class="nav-btn submit-btn hidden">Criar Personagem ‚úì</button>
            </div>
        </form>
    </div>

    <!-- Modal de Sele√ß√£o de Ra√ßa -->
    <div id="raceSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>üè∞ Escolha sua Ra√ßa</h2>
            <div class="selection-grid" id="raceSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Classe -->
    <div id="classSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>‚öîÔ∏è Escolha sua Classe</h2>
            <div class="selection-grid" id="classSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Subclasse -->
    <div id="subclassSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>‚ú® Escolha sua Subclasse</h2>
            <div class="selection-grid" id="subclassSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Antecedente -->
    <div id="backgroundSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>üìú Escolha seu Antecedente</h2>
            <div class="selection-grid" id="backgroundSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal for Subrace Selection -->
    <div id="subraceSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close" onclick="characterCreation.backToRaceModal()">&times;</span>
            <h2>‚ú® Selecione uma Sub-ra√ßa</h2>
            
            <!-- Race info display will be inserted here by JS -->
            <!-- Subrace info display will be inserted here by JS -->
            
            <div class="selection-grid" id="subraceSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
            
            <!-- Action buttons will be inserted here by JS -->
        </div>
    </div>

    <!-- OLD Modal for Subraces (deprecated) -->
    <div id="subraceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="raceTitle">Ra√ßa Selecionada</h2>
            
            <div class="race-info" id="raceInfo">
                <!-- Race benefits will be displayed here -->
            </div>

            <div class="subraces-container" id="subracesContainer">
                <h3>Sub-ra√ßas Dispon√≠veis:</h3>
                <div id="subracesList"></div>
            </div>

            <div class="modal-actions">
                <button type="button" id="keepRaceBtn" class="btn-secondary">Permanecer com a Ra√ßa</button>
            </div>
        </div>
    </div>

    <!-- Modal for Choosing Personality Traits -->
    <div id="personalityModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="personalityTitle">Escolher Tra√ßo</h2>
            
            <div class="personality-list" id="personalityList">
                <!-- Personality options will be displayed here -->
            </div>
        </div>
    </div>

    <script type="module" src="js/character-creation.js"></script>
</body>
</html>
