<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CriaÃ§Ã£o de Personagem - RPG Player</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="img/site.webmanifest">
    <link rel="shortcut icon" href="img/favicon.ico">
    
    <link rel="stylesheet" href="styles/character-creation.css">
</head>
<body>
    <div class="creation-container">
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">RaÃ§a & Classe</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">TendÃªncia</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Detalhes</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Atributos</div>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">PerÃ­cias</div>
            </div>
            <div class="progress-step" data-step="6">
                <div class="step-number">6</div>
                <div class="step-label">Pontos de Vida</div>
            </div>
            <div class="progress-step" data-step="7">
                <div class="step-number">7</div>
                <div class="step-label">Idiomas</div>
            </div>
            <div class="progress-step" data-step="8">
                <div class="step-number">8</div>
                <div class="step-label">Personalidade</div>
            </div>
        </div>

        <!-- Form Steps -->
        <form id="characterForm" class="character-form">
            
            <!-- Step 1: RaÃ§a, Classe, Subclasse, NÃ­vel -->
            <div class="form-step active" data-step="1">
                <h2 class="step-title">âš”ï¸ Escolha sua RaÃ§a & Classe</h2>
                <p class="step-description">Defina a essÃªncia do seu herÃ³i</p>
                
                <div class="form-group">
                    <label>ğŸ° RaÃ§a</label>
                    <button type="button" class="selection-btn" id="selectRaceBtn">
                        <span class="selection-label" id="selectedRaceLabel">Selecione uma raÃ§a...</span>
                        <span class="selection-icon">â–¼</span>
                    </button>
                    <input type="hidden" id="race" name="race" required>
                </div>

                <div class="form-group">
                    <label>âš”ï¸ Classe</label>
                    <button type="button" class="selection-btn" id="selectClassBtn">
                        <span class="selection-label" id="selectedClassLabel">Selecione uma classe...</span>
                        <span class="selection-icon">â–¼</span>
                    </button>
                    <input type="hidden" id="class" name="class" required>
                </div>

                <div class="form-group" id="subclassGroup" style="display: none;">
                    <label>âœ¨ Subclasse</label>
                    <button type="button" class="selection-btn" id="selectSubclassBtn">
                        <span class="selection-label" id="selectedSubclassLabel">Selecione uma subclasse...</span>
                        <span class="selection-icon">â–¼</span>
                    </button>
                    <input type="hidden" id="subclass" name="subclass">
                </div>

                <div class="form-group">
                    <label for="level">ğŸ“Š NÃ­vel</label>
                    <select id="level" name="level" required>
                        <option value="">Selecione o nÃ­vel...</option>
                    </select>
                </div>
            </div>

            <!-- Step 2: TendÃªncia e Antecedente -->
            <div class="form-step" data-step="2">
                <h2 class="step-title">âš–ï¸ TendÃªncia & Antecedente</h2>
                <p class="step-description">Defina sua moralidade e passado</p>
                
                <div class="form-group">
                    <label for="alignment">âš–ï¸ TendÃªncia</label>
                    <select id="alignment" name="alignment" required>
                        <option value="">Selecione uma tendÃªncia...</option>
                        <option value="leal-bom">Leal e Bom</option>
                        <option value="neutro-bom">Neutro e Bom</option>
                        <option value="caotico-bom">CaÃ³tico e Bom</option>
                        <option value="leal-neutro">Leal e Neutro</option>
                        <option value="neutro">Neutro</option>
                        <option value="caotico-neutro">CaÃ³tico e Neutro</option>
                        <option value="leal-mau">Leal e Mau</option>
                        <option value="neutro-mau">Neutro e Mau</option>
                        <option value="caotico-mau">CaÃ³tico e Mau</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ğŸ“œ Antecedente</label>
                    <button type="button" class="selection-btn" id="selectBackgroundBtn">
                        <span class="selection-label" id="selectedBackgroundLabel">Selecione um antecedente...</span>
                        <span class="selection-icon">â–¼</span>
                    </button>
                    <input type="hidden" id="background" name="background" required>
                </div>
            </div>

            <!-- Step 3: Detalhes do Personagem -->
            <div class="form-step" data-step="3">
                <h2 class="step-title">ğŸ­ Detalhes do Personagem</h2>
                <p class="step-description">DÃª vida Ã  aparÃªncia do seu herÃ³i</p>
                
                <div class="form-group">
                    <label for="characterName">âœ¨ Nome do Personagem</label>
                    <input type="text" id="characterName" name="characterName" required placeholder="Digite o nome do seu herÃ³i...">
                </div>

                <div class="form-group">
                    <label for="characterImage">ğŸ–¼ï¸ Imagem do Personagem</label>
                    <div class="image-upload-container">
                        <div class="image-preview-wrapper" id="imagePreviewWrapper">
                            <div class="image-placeholder" id="imagePlaceholder">
                                <span class="placeholder-icon">ğŸ­</span>
                                <span class="placeholder-text">Clique para adicionar imagem</span>
                            </div>
                            <img id="imagePreview" class="character-image-preview" style="display: none;">
                            <button type="button" class="btn-remove-image" id="removeImageBtn" style="display: none;">
                                <span>âœ•</span>
                            </button>
                        </div>
                        <input type="file" id="characterImage" name="characterImage" accept="image/*" style="display: none;">
                        <button type="button" class="btn-upload-image" id="uploadImageBtn">
                            ğŸ“¤ Escolher Imagem
                        </button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eyes">ğŸ‘ï¸ Olhos</label>
                        <input type="text" id="eyes" name="eyes" placeholder="ex: Azuis profundos">
                    </div>
                    <div class="form-group">
                        <label for="skin">ğŸ¨ Pele</label>
                        <input type="text" id="skin" name="skin" placeholder="ex: Morena clara">
                    </div>
                    <div class="form-group">
                        <label for="hair">ğŸ’‡ Cabelo</label>
                        <input type="text" id="hair" name="hair" placeholder="ex: Castanho longo">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="weight">âš–ï¸ Peso</label>
                        <input type="text" id="weight" name="weight" placeholder="ex: 70 kg">
                    </div>
                    <div class="form-group">
                        <label for="height">ğŸ“ Altura</label>
                        <input type="text" id="height" name="height" placeholder="ex: 1,75 m">
                    </div>
                    <div class="form-group">
                        <label for="age">ğŸ‚ Idade</label>
                        <input type="number" id="age" name="age" min="1" placeholder="ex: 25">
                    </div>
                </div>
            </div>

            <!-- Step 4: Atributos -->
            <div class="form-step" data-step="4">
                <h2 class="step-title">ğŸ’ª Atributos</h2>
                <p class="step-description">Determine as capacidades fundamentais do seu herÃ³i</p>
                
                <div class="method-selection">
                    <h3 class="subsection-title">âš¡ Escolha o mÃ©todo de geraÃ§Ã£o:</h3>
                    <div class="method-buttons">
                        <button type="button" class="method-btn" data-method="4d6">
                            <div class="method-icon">ğŸ²</div>
                            <div class="method-name">4d6 - Drop Lowest</div>
                            <div class="method-description">Role 4 dados e descarte o menor resultado</div>
                        </button>
                        <button type="button" class="method-btn" data-method="standard">
                            <div class="method-icon">ğŸ“Š</div>
                            <div class="method-name">Valores PadrÃ£o</div>
                            <div class="method-description">Use: 15, 14, 13, 12, 10, 8</div>
                        </button>
                    </div>
                </div>

                <div id="diceRolling" class="dice-rolling hidden">
                    <div class="rolls-remaining">
                        Rolagens restantes: <span id="rollsLeft">6</span>
                    </div>
                    
                    <div class="dice-container">
                        <div class="die" id="die1">?</div>
                        <div class="die" id="die2">?</div>
                        <div class="die" id="die3">?</div>
                        <div class="die" id="die4">?</div>
                    </div>
                    
                    <button type="button" id="rollDiceBtn" class="roll-btn">Rolar Dados</button>
                    
                    <div class="rolled-values">
                        <h4>Valores Rolados:</h4>
                        <div id="rolledValuesList"></div>
                    </div>
                </div>

                <div id="attributeAssignment" class="attribute-assignment hidden">
                    <h3>âš”ï¸ Distribua os valores nos atributos:</h3>
                    <div class="attributes-grid">
                        <div class="attribute-item">
                            <label>ğŸ’ª ForÃ§a</label>
                            <select name="str" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>ğŸ¹ Destreza</label>
                            <select name="dex" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>â¤ï¸ ConstituiÃ§Ã£o</label>
                            <select name="con" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>ğŸ§  InteligÃªncia</label>
                            <select name="int" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>ğŸ¦‰ Sabedoria</label>
                            <select name="wis" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                        <div class="attribute-item">
                            <label>âœ¨ Carisma</label>
                            <select name="cha" required>
                                <option value="">-</option>
                            </select>
                            <span class="modifier">+0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: PerÃ­cias -->
            <div class="form-step" data-step="5">
                <h2 class="step-title">ğŸ¯ PerÃ­cias</h2>
                <p class="step-description">Escolha as especialidades do seu personagem</p>
                
                <div class="skills-info">
                    <p>Escolha <strong><span id="skillsToChoose">2</span></strong> perÃ­cia(s)</p>
                    <div class="legend">
                        <span class="legend-item"><span class="box checked"></span> Do antecedente</span>
                        <span class="legend-item"><span class="box available"></span> DisponÃ­vel</span>
                        <span class="legend-item"><span class="box disabled"></span> NÃ£o disponÃ­vel</span>
                    </div>
                </div>

                <div class="skills-grid" id="skillsGrid">
                    <!-- Skills will be populated by JavaScript -->
                </div>
            </div>

            <!-- Step 6: Pontos de Vida -->
            <div class="form-step" data-step="6">
                <h2 class="step-title">â¤ï¸ Pontos de Vida</h2>
                <p class="step-description">Determine a resistÃªncia vital do seu herÃ³i</p>
                
                <div class="hp-method-selection">
                    <h3 class="subsection-title">âš¡ Como deseja calcular seus pontos de vida?</h3>
                    <div class="method-buttons">
                        <button type="button" class="method-btn" data-hp-method="average">
                            <div class="method-icon">ğŸ“Š</div>
                            <div class="method-name">Valor MÃ©dio</div>
                            <div class="method-description">Valor fixo e consistente por nÃ­vel</div>
                        </button>
                        <button type="button" class="method-btn" data-hp-method="roll">
                            <div class="method-icon">ğŸ²</div>
                            <div class="method-name">Rolagem de Dados</div>
                            <div class="method-description">Role o dado de vida para cada nÃ­vel</div>
                        </button>
                    </div>
                </div>

                <div id="hpCalculation" class="hp-calculation hidden">
                    <div class="hp-summary">
                        <h3>Seus Pontos de Vida:</h3>
                        <div class="hp-display">
                            <div class="hp-value">
                                <span id="totalHP">0</span>
                                <label>Total</label>
                            </div>
                        </div>
                        <div class="hp-breakdown" id="hpBreakdown"></div>
                    </div>
                </div>
            </div>

            <!-- Step 7: Idiomas e ProficiÃªncias -->
            <div class="form-step" data-step="7">
                <h2 class="step-title">ğŸ—£ï¸ Idiomas e ProficiÃªncias</h2>
                <p class="step-description">Amplie as capacidades do seu personagem</p>
                
                <div id="extraChoices" class="extra-choices">
                    <div class="extra-section" id="languageSection">
                        <h3>ğŸŒ Idiomas Adicionais</h3>
                        <p>Escolha <strong><span id="languagesToChoose">0</span></strong> idioma(s) adicional(is)</p>
                        <div class="choices-grid" id="languagesGrid"></div>
                    </div>

                    <div class="extra-section" id="proficiencySection">
                        <h3>ğŸ› ï¸ ProficiÃªncias Adicionais</h3>
                        <p>Escolha <strong><span id="proficienciesToChoose">0</span></strong> proficiÃªncia(s) adicional(is)</p>
                        <div class="choices-grid" id="proficienciesGrid"></div>
                    </div>
                </div>
            </div>

            <!-- Step 8: TraÃ§os de Personalidade -->
            <div class="form-step" data-step="8">
                <h2 class="step-title">ğŸ­ Personalidade</h2>
                <p class="step-description">Defina a essÃªncia emocional e moral do seu herÃ³i</p>
                
                <div class="personality-section">
                    <div class="personality-category">
                        <h3>âœ¨ TraÃ§os de Personalidade</h3>
                        <p class="category-hint">CaracterÃ­sticas marcantes que definem o comportamento do seu personagem</p>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="traits">ğŸ² Sortear</button>
                            <button type="button" class="choose-btn" data-category="traits">ğŸ“‹ Escolher da Lista</button>
                        </div>
                        <textarea id="traits" name="traits" rows="3" placeholder="Digite ou sorteie traÃ§os de personalidade..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>âš–ï¸ Ideais</h3>
                        <p class="category-hint">Os valores e princÃ­pios que guiam suas aÃ§Ãµes e decisÃµes</p>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="ideals">ğŸ² Sortear</button>
                            <button type="button" class="choose-btn" data-category="ideals">ğŸ“‹ Escolher da Lista</button>
                        </div>
                        <textarea id="ideals" name="ideals" rows="3" placeholder="Digite ou sorteie um ideal..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>ğŸ”— VÃ­nculos</h3>
                        <p class="category-hint">ConexÃµes pessoais, pessoas, lugares ou eventos importantes</p>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="bonds">ğŸ² Sortear</button>
                            <button type="button" class="choose-btn" data-category="bonds">ğŸ“‹ Escolher da Lista</button>
                        </div>
                        <textarea id="bonds" name="bonds" rows="3" placeholder="Digite ou sorteie um vÃ­nculo..."></textarea>
                    </div>

                    <div class="personality-category">
                        <h3>âš ï¸ Defeitos</h3>
                        <p class="category-hint">Fraquezas, medos ou falhas que tornam seu personagem humano</p>
                        <div class="personality-controls">
                            <button type="button" class="random-btn" data-category="flaws">ğŸ² Sortear</button>
                            <button type="button" class="choose-btn" data-category="flaws">ğŸ“‹ Escolher da Lista</button>
                        </div>
                        <textarea id="flaws" name="flaws" rows="3" placeholder="Digite ou sorteie um defeito..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="form-navigation">
                <button type="button" id="prevBtn" class="nav-btn prev-btn" disabled>â† Anterior</button>
                <button type="button" id="nextBtn" class="nav-btn next-btn">PrÃ³ximo â†’</button>
                <button type="submit" id="submitBtn" class="nav-btn submit-btn hidden">Criar Personagem âœ“</button>
            </div>
        </form>
    </div>

    <!-- Modal de SeleÃ§Ã£o de RaÃ§a -->
    <div id="raceSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>ğŸ° Escolha sua RaÃ§a</h2>
            <div class="selection-grid" id="raceSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de SeleÃ§Ã£o de Classe -->
    <div id="classSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>âš”ï¸ Escolha sua Classe</h2>
            <div class="selection-grid" id="classSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de SeleÃ§Ã£o de Subclasse -->
    <div id="subclassSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>âœ¨ Escolha sua Subclasse</h2>
            <div class="selection-grid" id="subclassSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal de SeleÃ§Ã£o de Antecedente -->
    <div id="backgroundSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close">&times;</span>
            <h2>ğŸ“œ Escolha seu Antecedente</h2>
            <div class="selection-grid" id="backgroundSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal for Subrace Selection -->
    <div id="subraceSelectionModal" class="modal">
        <div class="modal-content selection-modal">
            <span class="close" onclick="characterCreation.backToRaceModal()">&times;</span>
            <h2>âœ¨ Selecione uma Sub-raÃ§a</h2>
            
            <!-- Race info display will be inserted here by JS -->
            <!-- Subrace info display will be inserted here by JS -->
            
            <div class="selection-grid" id="subraceSelectionGrid">
                <!-- Populated by JavaScript -->
            </div>
            
            <!-- Action buttons will be inserted here by JS -->
        </div>
    </div>

    <!-- OLD Modal for Subraces (deprecated) -->
    <div id="subraceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="raceTitle">RaÃ§a Selecionada</h2>
            
            <div class="race-info" id="raceInfo">
                <!-- Race benefits will be displayed here -->
            </div>

            <div class="subraces-container" id="subracesContainer">
                <h3>Sub-raÃ§as DisponÃ­veis:</h3>
                <div id="subracesList"></div>
            </div>

            <div class="modal-actions">
                <button type="button" id="keepRaceBtn" class="btn-secondary">Permanecer com a RaÃ§a</button>
            </div>
        </div>
    </div>

    <!-- Modal for Choosing Personality Traits -->
    <div id="personalityModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="personalityTitle">Escolher TraÃ§o</h2>
            
            <div class="personality-list" id="personalityList">
                <!-- Personality options will be displayed here -->
            </div>
        </div>
    </div>

    <script type="module" src="js/character-creation.js"></script>
</body>
</html>
